TML.add("backtop",function(r,d,k){function l(){i.use("anim",function(b,c){c.apply(null,arguments).run()})}var i=KISSY,m=window,n=document,o=i.UA.ie&&i.UA.ie<9,q=o&&i.UA.ie==6,p="ui-scrolltop-hidden",j={bottom:200,right:10,height:"60px",width:"60px",baseLine:400,isAnim:false,type:1};return{scrollEl:null,getValue:function(){return m.pageYOffset||n.body.scrollTop||n.documentElement.scrollTop},updateValue:function(b,c,a,e){m.scrollTo(0,-a*(b/=e)*(b-2)+c)},scrollTop:function(b){var c=this,a=c.getValue(),
e=null,h=0,f=0,g=parseInt(a/150);if(b!==a){f=b-a;e=setInterval(function(){if(h<=g){c.updateValue(h,a,f,g);h++}else clearInterval(e)},5)}},addCss:function(){return".ui-scrolltop{ display:block; position:fixed; _position:absolute; right:10px; bottom:200px; z-index: 9999; height:60px; width:60px; text-indent:-999999px; overflow: hidden; background:#000 url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAANAgMAAACP9jv8AAAACVBMVEX///////8AAACO9MPsAAAAAXRSTlMAQObYZgAAAGhJREFUeF49zsEJwCAMBdBvoRfvWaJTOEIPZp+O4lEyZcn/RIl+SMJDAG2gTlfc7+k8H8Pm6cRiuFfjip3RphXUV4ghJIaQjVZQoCfkLDI7C7kgiAuRDK+YvJwLQnBPhovRw7ER5of3DyPbFp8RB9axAAAAAElFTkSuQmCC) 18px 21px no-repeat; *background-image:url(http://a.tbcdn.cn/apps/tmall/mui/backtop/img/backtop.png);opacity:0.5; filter:alpha(opacity=50); cursor: pointer; -moz-transition: opacity 0.3s ease-in,opacity 0.3s ease-out;  -webkit-transition: opacity 0.3s ease-in,opacity 0.3s ease-out;  -o-transition: opacity 0.3s ease-in,opacity 0.3s ease-out;  transition: opacity 0.3s ease-in,opacity 0.3s ease-out; } .ui-scrolltop:hover{ opacity:1; filter:alpha(opacity=100); -moz-transition: opacity 0.3s ease-in,opacity 0.3s ease-out;  -webkit-transition: opacity 0.3s ease-in,opacity 0.3s ease-out;  -o-transition: opacity 0.3s ease-in,opacity 0.3s ease-out;  transition: opacity 0.3s ease-in,opacity 0.3s ease-out; } .ui-scrolltop-hidden{ visibility: hidden; _visibility:visible;_display:none;opacity:0; filter:alpha(opacity=0); -moz-transition: opacity 0.3s ease-in,opacity 0.3s ease-out;  -webkit-transition: opacity 0.3s ease-in,opacity 0.3s ease-out;  -o-transition: opacity 0.3s ease-in,opacity 0.3s ease-out;  transition: opacity 0.3s ease-in,opacity 0.3s ease-out; }.ui-scrolltop-wb{ background-position:-25px 21px; background-color:#fff; }"},
createEl:function(){var b=this.addCss(),c=d.create('<a id="J_ScrollTopBtn" class="ui-scrolltop ui-scrolltop-hidden '+(j.type==2?"ui-scrolltop-wb":"")+'" title="\u8fd4\u56de\u9876\u90e8">\u8fd4\u56de\u9876\u90e8</a>');d.addStyleSheet(b);d.append(c,"body");return c},bindEvent:function(){function b(){var f=d.hasClass(a,p),g=parseInt(d.scrollTop(n));if(g>h&&f){o&&l(a,{opacity:"0.5"},0.2);d.removeClass(a,p)}else if(g<h&&!f){o&&l(a,{opacity:"0"},0.2);d.addClass(a,p)}if(q){f=d.viewportHeight(n);g=g+f-e.bottom-
d.height(a);d.css(a,"top",g)}}var c=this,a=c.scrollEl,e=j,h=e.baseLine;if(a){k.on(a,"click",function(f){f.preventDefault();q&&d.addClass(a,p);e.isAnim?c.scrollTop(0):m.scrollTo(0,0);e.onClick&&e.onClick()});k.on(m,"scroll",b);if(o){k.on(a,"mouseenter",function(){l(a,{opacity:"1"},0.2)});k.on(a,"mouseleave",function(){l(a,{opacity:".5"},0.2)})}}},init:function(b){b=b||{};if(!i.get("#J_ScrollTopBtn")){if(b.type)j.type=b.type;if(b.isAnim)j.isAnim=b.isAnim;j.onClick=b.onClick;this.scrollEl=this.createEl();
this.bindEvent()}}}},{requires:["kissy/dom","kissy/event"]});